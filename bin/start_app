#!/bin/bash


# This should transition to db:test:prepare eventually but I'm still dependent on seeds
if [ "$RAILS_ENV" = "test" ]
then
  bundle check || bundle install --deployment
  bundle exec rails db:setup
else
  bundle check || bundle install
fi

if [ "$RAILS_ENV" = "production" ]
then
  bundle exec rails assets:clean
  bundle exec rails assets:precompile
fi

bundle exec puma -C config/puma.rb
